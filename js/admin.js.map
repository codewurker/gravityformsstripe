{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/src/admin.js"],"names":["window","GFStripeAdmin","$","GFStripeAdminClass","self","accountSettingsLocked","deauthActionable","inputContainerPrefix","gforms_stripe_admin_strings","input_container_prefix","inputPrefix","input_prefix","liveDependencySupported","apiMode","init","initKeyStatus","bindDeauthorize","bindAPIModeChange","maybeLockAccountSettings","bindWebhookAlert","bindRefund","bindCapture","validateKey","keyName","key","length","setKeyStatus","val","trim","setKeyStatusIcon","spinner","validatePublishableKey","validateSecretKey","post","ajaxurl","action","nonce","ajax_nonce","response","validation_error","cc","number","exp_month","exp_year","Date","getFullYear","cvc","name","Stripe","setPublishableKey","card","createToken","status","is_valid","iconMarkup","icon","remove","after","on","e","preventDefault","location","reload","deauthButton","deauthScope","disconnectMessage","disconnect","data","feedId","eq","hide","show","deauthScopeVal","is","message","confirm","attr","ajax","async","url","dataType","method","scope","fid","id","mode","success","alert","removeAttr","prop","hideMode","apiRows","siblings","switch_account_disabled_message","off","addClass","inputName","addEventListener","returnValue","focus","document","documentElement","body","animate","scrollTop","offset","top","refundButton","refundWaitContainer","transactionId","entryId","refund","fadeIn","wp","a11y","speak","refund_processing","transaction_id","entry_id","refund_nonce","html","complete","refund_complete","fail","jqXHR","textStatus","error","captureButton","captureWaitContainer","errorContainer","capture_confirm","capture_processing","requestData","capture_complete","ready","jQuery"],"mappings":"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","file":"./js/admin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./js/src/admin.js\");\n","/**\r\n * Admin Script\r\n */\r\n\r\n/* global jQuery, gforms_stripe_admin_strings */\r\n\r\nwindow.GFStripeAdmin = null;\r\n\r\n(function ($) {\r\n    var GFStripeAdminClass = function GFStripeAdminClass() {\r\n\r\n        var self = this;\r\n\r\n        this.accountSettingsLocked = false;\r\n        this.deauthActionable = false;\r\n        this.inputContainerPrefix = gforms_stripe_admin_strings.input_container_prefix;\r\n        this.inputPrefix = gforms_stripe_admin_strings.input_prefix;\r\n        this.liveDependencySupported = gforms_stripe_admin_strings.liveDependencySupported;\r\n        this.apiMode = gforms_stripe_admin_strings.apiMode;\r\n        this.init = function() {\r\n            this.initKeyStatus('live_publishable_key');\r\n            this.initKeyStatus('live_secret_key');\r\n            this.initKeyStatus('test_publishable_key');\r\n            this.initKeyStatus('test_secret_key');\r\n            this.bindDeauthorize();\r\n\r\n            if ( ! this.liveDependencySupported ) {\r\n                this.bindAPIModeChange();\r\n            }\r\n\r\n            this.maybeLockAccountSettings();\r\n            this.bindWebhookAlert();\r\n\r\n            this.bindRefund();\r\n            this.bindCapture();\r\n        }\r\n\r\n        this.validateKey = function(keyName, key){\r\n\r\n            if(key.length == 0){\r\n                this.setKeyStatus(keyName, \"\");\r\n                return;\r\n            }\r\n\r\n            $('#' + keyName).val(key.trim());\r\n\r\n            this.setKeyStatusIcon(keyName, \"<img src='\" + gforms_stripe_admin_strings.spinner + \"'/>\");\r\n\r\n            if( keyName == \"live_publishable_key\" || keyName == \"test_publishable_key\" )\r\n                this.validatePublishableKey(keyName, key);\r\n            else\r\n                this.validateSecretKey(keyName, key);\r\n\r\n        };\r\n\r\n        this.validateSecretKey = function(keyName, key){\r\n            $.post(ajaxurl, {\r\n                    action: \"gf_validate_secret_key\",\r\n                    keyName: keyName,\r\n                    key: key,\r\n                    nonce: gforms_stripe_admin_strings.ajax_nonce\r\n                },\r\n                function(response) {\r\n\r\n                    response = response.trim();\r\n\r\n                    if(response == \"valid\"){\r\n                        self.setKeyStatus(keyName, \"1\");\r\n                    }\r\n                    else if(response == \"invalid\"){\r\n                        self.setKeyStatus(keyName, \"0\");\r\n                    }\r\n                    else{\r\n                        self.setKeyStatusIcon(keyName, gforms_stripe_admin_strings.validation_error);\r\n                    }\r\n                }\r\n            );\r\n        }\r\n\r\n        this.validatePublishableKey = function(keyName, key){\r\n            this.setKeyStatusIcon(keyName, \"<img src='\" + gforms_stripe_admin_strings.spinner + \"'/>\");\r\n\r\n            cc = {\r\n                number:     \"4916433572511762\",\r\n                exp_month:  \"01\",\r\n                exp_year:   (new Date()).getFullYear() + 1,\r\n                cvc:        \"111\",\r\n                name:       \"Test Card\"\r\n            };\r\n\r\n            Stripe.setPublishableKey( key );\r\n            Stripe.card.createToken( cc, function( status, response ) {\r\n\r\n                if(status == 200){\r\n                    self.setKeyStatus(keyName, \"1\");\r\n                }\r\n                else if( ( status == 400 || status == 402 ) && keyName == \"live_publishable_key\" ){\r\n                    //Live publishable key will return a 400 or 402 status when the key is valid, but the account isn't setup to run live transactions\r\n                    self.setKeyStatus(keyName, \"1\");\r\n                }\r\n                else{\r\n                    self.setKeyStatus(keyName, \"0\");\r\n                }\r\n            });\r\n        }\r\n\r\n        this.initKeyStatus = function(keyName){\r\n            var is_valid = $('#' + keyName + '_is_valid');\r\n            var key = $('#' + keyName );\r\n\r\n            if(is_valid.length > 0){\r\n                this.setKeyStatus(keyName, is_valid.val());\r\n            }\r\n            else if( key.length > 0 ){\r\n                this.validateKey(keyName, key.val());\r\n            }\r\n\r\n\r\n        }\r\n\r\n        this.setKeyStatus = function(keyName, is_valid){\r\n            $('#' + keyName + '_is_valid').val(is_valid);\r\n\r\n            var iconMarkup = \"\";\r\n            if(is_valid == \"1\")\r\n                iconMarkup = \"<i class=\\\"fa icon-check fa-check gf_valid\\\"></i>\";\r\n            else if(is_valid == \"0\")\r\n                iconMarkup = \"<i class=\\\"fa icon-remove fa-times gf_invalid\\\"></i>\";\r\n\r\n            this.setKeyStatusIcon(keyName, iconMarkup);\r\n        }\r\n\r\n        this.setKeyStatusIcon = function(keyName, iconMarkup){\r\n            var icon = $('#' + keyName + \"_status_icon\");\r\n            if(icon.length > 0)\r\n                icon.remove();\r\n\r\n            $('#' + keyName).after(\"<span id='\" + keyName + \"_status_icon'>&nbsp;&nbsp;\" + iconMarkup + \"</span>\");\r\n        }\r\n\r\n        this.bindDeauthorize = function () {\r\n            // De-Authorize from Stripe.\r\n            $('.gform_stripe_deauth_button').on('click', function (e) {\r\n                e.preventDefault();\r\n\r\n                if ( self.accountSettingsLocked ) {\r\n                    // do a reload to trigger beforeunload event.\r\n                    window.location.reload();\r\n                    return false;\r\n                }\r\n\r\n                // Get button.\r\n                var deauthButton = $('#gform_stripe_deauth_button'),\r\n                    deauthScope = $('#deauth_scope'),\r\n                    disconnectMessage = gforms_stripe_admin_strings.disconnect,\r\n                    apiMode = $(this).data('mode'),\r\n                    feedId = $(this).data('fid');\r\n\r\n                if (!self.deauthActionable) {\r\n                    $('.gform_stripe_deauth_button').eq(0).hide();\r\n                    if (feedId !== '') {\r\n                        $('.connected_to_stripe_text').hide();\r\n                    }\r\n\r\n                    deauthScope.show(0, function(){\r\n                        self.deauthActionable = true;\r\n                    });\r\n                } else {\r\n                    var deauthScopeVal = $('#' + apiMode + '_deauth_scope0').is(':checked') ? 'site' : 'account',\r\n                        message = (deauthScopeVal === 'site' && feedId !== '') ? disconnectMessage['feed'] : disconnectMessage[deauthScopeVal];\r\n\r\n                    // Confirm deletion.\r\n                    if (!confirm(message)) {\r\n                        return false;\r\n                    }\r\n\r\n                    // Set disabled state.\r\n                    deauthButton.attr('disabled', 'disabled');\r\n\r\n                    // De-Authorize.\r\n                    $.ajax({\r\n                        async: false,\r\n                        url: ajaxurl,\r\n                        dataType: 'json',\r\n                        method: 'POST',\r\n                        data: {\r\n                            action: 'gfstripe_deauthorize',\r\n                            scope: deauthScopeVal,\r\n                            fid: feedId,\r\n                            id: $(this).data('id'),\r\n                            mode: apiMode,\r\n                            nonce: gforms_stripe_admin_strings.ajax_nonce\r\n                        },\r\n                        success: function (response) {\r\n                            if (response.success) {\r\n                                window.location.reload();\r\n                            } else {\r\n                                alert(response.data.message);\r\n                            }\r\n\r\n                            deauthButton.removeAttr('disabled');\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        }\r\n\r\n        this.bindAPIModeChange = function() {\r\n            if ( this.apiMode === '' || typeof this.apiMode === \"undefined\" ) {\r\n                this.apiMode = 'live';\r\n                $('#api_mode0').prop('checked', true);\r\n            }\r\n            var hideMode = ( this.apiMode === 'live' ) ? 'test' : 'live';\r\n\r\n            // display the Stripe Connect button in corresponding mode.\r\n            $('#' + this.inputContainerPrefix + this.apiMode + '_auth_token').show();\r\n            $('#' + this.inputContainerPrefix + hideMode + '_auth_token').hide();\r\n            // Switch Stripe Connect button between live and test mode.\r\n            $('#tab_gravityformsstripe input[name=\"' + this.inputPrefix + '_api_mode\"]').on('click', function(e) {\r\n                self.apiMode = $(this).val();\r\n                hideMode = ( self.apiMode === 'live' ) ? 'test' : 'live';\r\n                $('#' + self.inputContainerPrefix + hideMode + '_auth_token').hide();\r\n                $('#' + self.inputContainerPrefix + self.apiMode + '_auth_token').show();\r\n            });\r\n        }\r\n\r\n        this.maybeLockAccountSettings = function() {\r\n            var apiRows = $( '#' + this.inputContainerPrefix + 'connected_to').siblings( '#' + this.inputContainerPrefix + 'api_mode, #' + this.inputContainerPrefix + 'live_auth_token, #' + this.inputContainerPrefix + 'test_auth_token' );\r\n            // Display the Connect To field and hide the other Stripe Account settings (only for feed settings).\r\n\t\t\tapiRows.hide();\r\n\r\n            // When clicked on the Switch Accounts button, show other fields and disable the button itself.\r\n            $('#gform_stripe_change_account').on('click', function() {\r\n\t\t\t\tif ( $(this).data('disabled') ) {\r\n\t\t\t\t    alert( gforms_stripe_admin_strings.switch_account_disabled_message );\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t$('#' + self.inputContainerPrefix + 'api_mode').show();\r\n\t\t\t\t\tvar hideMode = ( self.apiMode === 'live' ) ? 'test' : 'live';\r\n\t\t\t\t\t$('#' + self.inputContainerPrefix + hideMode + '_auth_token').hide();\r\n\t\t\t\t\t$('#' + self.inputContainerPrefix + self.apiMode + '_auth_token').show();\r\n\t\t\t\t\t$(this).off('click').addClass('disabled');\r\n\t\t\t\t}\r\n            });\r\n\r\n            // Track if the feed settings were changed.\r\n            $('table.gforms_form_settings').on('change', 'input, select', function() {\r\n                var inputName = $(this).attr('name');\r\n                if ( inputName !== self.inputPrefix + '_api_mode' && inputName !== 'deauth_scope' && inputName !== self.inputPrefix + '_transactionType' ) {\r\n                    self.accountSettingsLocked = true;\r\n                }\r\n            });\r\n\r\n            // When the Update Settings button clicked, unlock the form.\r\n            $('#gform-settings-save').on('click', function() {\r\n                $('.error.below-h2').remove();\r\n                self.accountSettingsLocked = false;\r\n            });\r\n\r\n            // Use the built-in \"beforeunload\" event to throw the confirmation when redirecting.\r\n            window.addEventListener('beforeunload', function (e) {\r\n                if ( self.accountSettingsLocked ) {\r\n                    // Cancel the event\r\n                    e.preventDefault();\r\n                    // Chrome requires returnValue to be set\r\n                    e.returnValue = '';\r\n                }\r\n            });\r\n        }\r\n\r\n        this.bindWebhookAlert = function() {\r\n            if ( $('#gform_stripe_change_account').length && $( '#' + this.apiMode + '_signing_secret' ).val() === '' ) {\r\n                $('#webhooks_enabled').focus();\r\n\r\n                $([document.documentElement, document.body]).animate({\r\n                    scrollTop: ($(\"#\" + self.inputContainerPrefix + \"api_mode\").offset().top + 20)\r\n                }, 1000);\r\n            }\r\n        }\r\n\r\n\r\n        /**\r\n         * Handles refund button click and sends a refund ajax request.\r\n         *\r\n         * @since 1.3 //@todo - version\r\n         */\r\n        this.bindRefund = function() {\r\n            $( '.stripe-refund' ).on(\r\n                'click',\r\n                function( e ) {\r\n                    e.preventDefault();\r\n                    var refundButton = $( '.stripe_refund' ),\r\n                        refundWaitContainer = $( '#refund_wait_container' ),\r\n                        transactionId = $( this ).data( 'tid' );\r\n                        entryId = $( this ).data( 'lid' );\r\n                    if ( ! window.confirm( gforms_stripe_admin_strings.refund ) ) {\r\n                        return false;\r\n                    }\r\n\r\n                    // Set disabled state.\r\n                    refundButton.prop( 'disabled', true );\r\n                    refundWaitContainer.fadeIn();\r\n                    wp.a11y.speak( gforms_stripe_admin_strings.refund_processing, 'assertive' );\r\n\r\n                    $.ajax(\r\n                        {\r\n                            async: true,\r\n                            url: ajaxurl,\r\n                            dataType: 'json',\r\n                            method: 'POST',\r\n                            data: {\r\n                                action: 'gfstripe_refund',\r\n                                transaction_id: transactionId,\r\n                                entry_id: entryId,\r\n                                nonce: gforms_stripe_admin_strings.refund_nonce,\r\n                            },\r\n                            success: function( response ) {\r\n                                if ( response.success ) {\r\n                                    window.location.reload();\r\n                                } else {\r\n                                    wp.a11y.speak( response.data.message, 'assertive' );\r\n                                    $( '.gform_stripe_refund_alert' ).show().html( response.data.message );\r\n                                }\r\n                            },\r\n                            complete: function() {\r\n                                wp.a11y.speak( gforms_stripe_admin_strings.refund_complete, 'assertive' );\r\n                                refundButton.prop( 'disabled', false );\r\n                                refundWaitContainer.hide();\r\n                            },\r\n                        }\r\n                    ).fail(\r\n                        function( jqXHR, textStatus, error ) {\r\n                            window.alert( error );\r\n                            refundButton.prop( 'disabled', false );\r\n                            refundWaitContainer.hide();\r\n                        }\r\n                    );\r\n                }\r\n            );\r\n        };\r\n\r\n\t\tthis.bindCapture = function() {\r\n\t\t\t$( '.stripe-capture' ).on( 'click keypress',\r\n\t\t\t\tfunction( e ) {\r\n\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\tvar captureButton = $( '.stripe-capture' ),\r\n                        captureWaitContainer = $( '#capture_wait_container' );\r\n\t\t\t\t\t\terrorContainer = $( '.gform_stripe_capture_alert' );\r\n\r\n\t\t\t\t\tif ( ! window.confirm( gforms_stripe_admin_strings.capture_confirm ) ) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Set disabled state\r\n\t\t\t\t\tcaptureWaitContainer.fadeIn();\r\n\t\t\t\t\tcaptureButton.prop( 'disabled', true );\r\n\t\t\t\t\terrorContainer.hide();\r\n\t\t\t\t\twp.a11y.speak( gforms_stripe_admin_strings.capture_processing, 'assertive' );\r\n\r\n\t\t\t\t\tvar requestData = captureButton.data( 'ajax' );\r\n\r\n\t\t\t\t\t$.ajax( {\r\n\t\t\t\t\t\turl: ajaxurl,\r\n\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\taction: 'gfstripe_capture_action',\r\n\t\t\t\t\t\t\ttransaction_id: requestData.transaction_id,\r\n\t\t\t\t\t\t\tentry_id: requestData.entry_id,\r\n\t\t\t\t\t\t\tnonce: requestData.nonce,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: function( response ) {\r\n\r\n\t\t\t\t\t\t\tif ( response.success ) {\r\n\t\t\t\t\t\t\t\twp.a11y.speak( gforms_stripe_admin_strings.capture_complete, 'assertive' );\r\n\t\t\t\t\t\t\t\t// Success. Reload page.\r\n\t\t\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\twp.a11y.speak( response.data, 'assertive' );\r\n                                errorContainer.show().html( response.data );\r\n\r\n                                captureButton.prop( 'disabled', false );\r\n                                captureWaitContainer.hide();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t).fail(\r\n\t\t\t\t\t\tfunction( jqXHR, textStatus, error ) {\r\n\t\t\t\t\t\t\twp.a11y.speak( error, 'assertive' );\r\n\t\t\t\t\t\t\terrorContainer.show().html( error );\r\n\r\n\t\t\t\t\t\t\tcaptureButton.prop( 'disabled', false );\r\n\t\t\t\t\t\t\tcaptureWaitContainer.hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t);\r\n        };\r\n\r\n        this.init();\r\n    };\r\n\r\n    $(document).ready(function() {\r\n        GFStripeAdmin = new GFStripeAdminClass();\r\n    });\r\n})(jQuery);\r\n"],"sourceRoot":""}